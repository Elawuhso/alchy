(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){},104:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var i=a(0),s=a.n(i),n=a(23),r=a.n(n),o=(a(41),a(15)),l=a(1),u=a(2),c=a(5),p=a(4),d=a(6),f=a(24),h=a.n(f),m=(a(43),a(12)),y=a(7);function v(e){var t=e.clickDelay,a=t-(new Date).getTime()+e.lastClick.getTime(),i=100;return t>0&&(i=100*((new Date).getTime()-e.lastClick.getTime())/t),s.a.createElement("div",{className:"nextClickProg"},s.a.createElement("div",{className:"label"},Math.round(e.clickDelay/100)/10,"s"),s.a.createElement(m.a,{from:{height:i+"%"},to:{height:"100%"},config:{duration:a},reset:!0},function(e){return s.a.createElement("div",{style:e,className:"bar"})}))}function g(e){var t=void 0!==e.clicks?e.clicks:0,a=e.isAuto?" isAuto":"",i=e.isShrink?" shrink":"";return s.a.createElement("div",{className:"clicker "+e.name+a+i},s.a.createElement("div",{className:"img",onClick:function(t){return e.onClick(t,e.name)}},s.a.createElement("div",{className:"icon"},s.a.createElement(y.a,{icon:e.name})),a?s.a.createElement("div",{className:"label"},"+",e.rewards.rewardAmount*e.power," ",e.rewards.rewardName,"/s"):""),s.a.createElement("div",{className:"prog"},s.a.createElement("div",{className:"label"},t,"/",Math.round(e.maxCount)),s.a.createElement("div",{className:"bar",style:{width:100*t/e.maxCount+"%"}})))}var k=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getClicks",value:function(e){if(void 0!==this.props.data&&void 0!==this.props.data.clicksReward)return this.props.data.clicksReward[e]}},{key:"render",value:function(){var e=this,t=!1;return this.props.data.clicker.map(function(a,i){if(!e.props.upgradeService.hasAutoClickerUpgrade(a))return t=!0}),s.a.createElement("div",{className:"clickComponent"},t?s.a.createElement(v,{clickDelay:this.props.clickRewards.clickDelay(this.props.data.clicker[this.props.data.clicker.length-1]),lastClick:this.props.lastClick}):"",this.props.data.clicker.map(function(t,a){return s.a.createElement(g,{name:t,key:t,rewards:e.props.clickRewards.rewardFor(t),power:e.props.upgradeService.getClickPower(t,!0),clicks:e.getClicks(t),maxCount:e.props.clickRewards.specialCount(t),isAuto:e.props.upgradeService.hasAutoClickerUpgrade(t),isShrink:e.props.data.shrinkAuto,onClick:function(t,a){return e.props.onClickClicker(a,!1,t)}})}))}}]),t}(s.a.Component);a(47);function b(e){return e<.01?Math.round(1e3*e)/1e3:e<1?Math.round(100*e)/100:e<10?Math.round(10*e)/10:Math.round(e)}function C(e){return e<10?Math.round(10*e)/10:e<1e4?Math.round(e):Math.round(e/1e3)+"K"}function w(e){return e<1e3?Math.round(e)+" ms":e<6e4?Math.round(e/1e3)+" sec":e<36e5?Math.round(e)/6e4+" min":"long"}function T(e,t){return 1+(Math.random()*(t+e)-e)/100}function E(e){var t=e.reactor.getFluid(),a=[];return e.reactor.stopInput.map(function(e,t){a[t]=e?" stopInput":""}),s.a.createElement("div",{className:"reactor "+e.reactor.curType+e.selected+(e.reactor.isRunning?" isRunning":"")+(e.reactor.shrink?" shrink":""),onClick:function(){return e.selectReactor()}},s.a.createElement("div",{className:"row"},"undefined"!==e.reactor.curType?t.inputFluid.map(function(t,i){return s.a.createElement("div",{key:i,className:"inputContainer "+t+" w-"+Math.round(100*e.reactor.reagentRatio[i])+a[i]},s.a.createElement("div",{className:"label"},b(e.reactor.inputValue[i])),s.a.createElement("div",{className:"bar",style:{height:100*e.reactor.inputValue[i]/(e.reactor.capacity()*e.reactor.reagentRatio[i])+"%"}}))}):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"inputContainer w-80"},s.a.createElement("div",{className:"label"}),s.a.createElement("div",{className:"bar"})),s.a.createElement("div",{className:"inputContainer w-20"},s.a.createElement("div",{className:"label"}),s.a.createElement("div",{className:"bar"})))),s.a.createElement("div",{className:"outputContainer "+t.outputFluid},s.a.createElement("div",{className:"label"},b(e.reactor.outputValue)," "),s.a.createElement("div",{className:"bar",style:{width:100*e.reactor.outputValue/e.reactor.capacity("output")+"%"}})),s.a.createElement("div",{className:"output"},"=> ",b(e.reactor.lastOutput)))}var x=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"deselect",value:function(e){"ReactorComponent"===e.target.className&&this.props.selectReactor(-1)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"ReactorComponent",onClick:function(t){return e.deselect(t)}},this.props.data.reactor.map(function(t,a){return s.a.createElement(E,{key:a,reactor:t,selectReactor:function(){return e.props.selectReactor(a)},selected:e.props.selectedReactor===a?" selected":""})}))}}]),t}(s.a.Component),F=a(25),N=a(35),M=a.n(N);F.b.addAdapter(M.a);var S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={data:[]},a.colors=["#277554","#AB3939","#2F4272","#718EA4","#11061D","#AA7739"],a.timer=setTimeout(function(){a.tick()},500*a.props.statisticDelay),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"tick",value:function(){var e=this,t=this.state.data.slice(),a=function(a){if(e.props.data.fluid.hasOwnProperty(a)){var i=e.props.data.fluid[a],s=-1;void 0!==t&&(s=t.findIndex(function(e){return e.name===a})),-1!==s?(t[s].data.push([new Date,i]),t[s].data.length>e.props.statisticPoints&&(t[s].data.shift(),t[s].data.length>e.props.statisticPoints&&t[s].data.shift())):t.push({name:a,data:[[new Date,i]]})}};for(var i in this.props.data.fluid)a(i);this.setState({data:t}),this.forceUpdate(),this.timer=setTimeout(function(){e.tick()},1e3*this.props.statisticDelay)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this,t=[],a=this.state.data.filter(function(a,i){var s=e.props.selectedFluids.findIndex(function(e){return e===a.name});return-1===s&&t.push(i),-1!==s}),i=this.colors.filter(function(e,a){return-1===t.findIndex(function(e){return e===a})});return s.a.createElement("div",{className:"statistic"},s.a.createElement(F.a,{colors:i,data:a}))}}]),t}(s.a.Component),O=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"main"},s.a.createElement(k,{onClickClicker:function(t,a,i){return e.props.onClickClicker(t,!1,i)},data:this.props.data,clickRewards:this.props.clickRewards,upgradeService:this.props.upgradeService,lastClick:this.props.lastClick}),s.a.createElement(x,{data:this.props.data,selectReactor:function(t){return e.props.selectReactor(t)},selectedReactor:this.props.selectedReactor}),s.a.createElement(S,{data:this.props.data,statisticPoints:this.props.statisticPoints,statisticDelay:this.props.statisticDelay,selectedFluids:this.props.selectedFluids}))}}]),t}(s.a.Component);function D(e){var t="";e.fluid;return e.upgr.fluidCostType.map(function(a,i){t+=e.upgr.fluidCost[i]+" "+a+", "}),t=t.replace(/,\s*$/,""),s.a.createElement("div",{className:"upgrade "+(e.upgr.buyable(e.fluid,e.flask)?"buyable":""),onClick:function(){return e.onClick(e.upgr.id)}},s.a.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:e.upgr.text}}),s.a.createElement("div",{className:"costs"},t))}var L=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).call(this,e))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.reactor.power,a="";return this.props.reactor.getFluidFlow()&&this.props.reactor.getFluidFlow().inputFluid.map(function(i,s){a+=b(e.props.reactor.getFluidFlow().input[s]*t)+" "+i+" + "}),a=a.replace(/\s[+]\s*$/,""),"undefined"===this.props.reactor.curType?s.a.createElement("div",{className:"selection"},s.a.createElement("div",{className:"title"},"Choose a Production"),this.props.upgradeService.getAvailableReactorTypes().map(function(t,a){return s.a.createElement("div",{key:a,className:"btn",onClick:function(){return e.props.setReactorType(e.props.id,t.name)}},s.a.createElement("div",{className:"name "+t.name},t.name),s.a.createElement("div",{className:"prod"+t.outputFluid},"Produce: ",t.outputFluid))})):s.a.createElement("div",{className:"selection"},s.a.createElement("div",{className:"btnRow"},s.a.createElement("div",{className:"closeBtn",onClick:function(){return e.props.deselect()}},s.a.createElement(y.a,{icon:"times"})),s.a.createElement("div",{className:"closeBtn minimize",onClick:function(){return e.props.shrinkReactor(e.props.id)}},s.a.createElement(y.a,{icon:"compress"})),s.a.createElement("div",{className:"closeBtn trash",onClick:function(){return e.props.setReactorType(e.props.id,"undefined")}},s.a.createElement(y.a,{icon:"trash"})),s.a.createElement("div",{className:"title"},this.props.reactor.curType," reactor")),s.a.createElement("div",{className:"btnRow"},this.props.reactor.stopInput.map(function(t,a){return s.a.createElement("div",{className:"btn",key:a,onClick:function(){return e.props.toggleInput(e.props.id,a)}},t?"start":"stop"," input ",a+1)})),s.a.createElement("div",{className:"slider"},s.a.createElement("div",{className:"text"},"throttle reactor 0 - 100%"),s.a.createElement("input",{type:"range",defaultValue:"1",min:"0",max:"1",step:"0.01"})),s.a.createElement("div",{className:"details"},s.a.createElement("div",{className:"title"},"Input:"),this.props.reactor.getFluidFlow().inputFluid.map(function(t,a){return s.a.createElement("div",{className:"detail",key:a},t,": ",b(e.props.reactor.lastInput[a]),"/",b(e.props.reactor.inputFlow[a])," (max ",100*e.props.reactor.inputFlowPerc,"%/s of storage)")}),s.a.createElement("div",{className:"title"},"Running:"),s.a.createElement("div",{className:"detail"},a," -> ",b(this.props.reactor.getFluidFlow().output*t)," ",this.props.reactor.getFluidFlow().outputFluid," ",s.a.createElement("div",{className:"small"},"(per second)")),s.a.createElement("div",{className:"title"},"Output:"),s.a.createElement("div",{className:"detail"},this.props.reactor.getFluidFlow().outputFluid,": ",b(this.props.reactor.lastOutput),"/s (max ",b(2*this.props.reactor.outputFlow),"/s)")),s.a.createElement("div",{className:"reactorUpgrades"},this.props.reactor.upgrades.map(function(t,a){return s.a.createElement(D,{onClick:function(){return e.props.onBuyReactorUpgrade(e.props.id,a)},upgr:t,key:a,fluid:e.props.fluid,flask:e.props.flask})})))}}]),t}(s.a.Component);a(91);function j(e){var t="";return e.flask.require.map(function(e,a){t+=e.value+" "+e.name+", "}),t=t.replace(/,\s*$/,""),s.a.createElement("div",{onClick:function(){return e.onClick()},className:"item "+(e.flask.buyable(e.fluid)?"buyable":"")},e.flask.name,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"dur"},w(e.duration)),s.a.createElement("div",{className:"costs"},t)))}function B(e){if(0===e.i){var t=e.flask.duration,a=t,i=0;return void 0!==e.flask.startDate&&(a=t-(new Date).getTime()+new Date(e.flask.startDate).getTime(),t>0&&(i=100*((new Date).getTime()-new Date(e.flask.startDate).getTime())/t)),s.a.createElement("div",{className:"queueProg",onClick:function(){return e.onClick()}},s.a.createElement("div",{className:"item flask "+e.flask.name.replace(/ /g,"-")},s.a.createElement(y.a,{icon:"flask"})," ",e.flask.name," ",w(e.flask.duration)),s.a.createElement(m.a,{from:{width:i+"%"},to:{width:"100%"},config:{duration:a},reset:!0},function(e){return s.a.createElement("div",{style:e,className:"bar"})}))}return s.a.createElement("div",{className:"flask "+e.flask.name.replace(/ /g,"-"),onClick:function(){return e.onClick()}},s.a.createElement(y.a,{icon:"flask"}))}var R=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).call(this,e))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.upgradeService.getAutoBrewing(),a=this.props.curAutoBrewing;return s.a.createElement("div",{className:"brewing"},s.a.createElement("div",{className:"brewQueue"},this.props.brewingService.getQueue().slice(0,49).map(function(t,a){return s.a.createElement(B,{key:a,i:a,flask:t,onClick:function(){return e.props.brewingService.removeQueueItem(a)}})}),this.props.brewingService.getQueue().length>49?s.a.createElement("div",null,"..."):""),s.a.createElement("div",{className:"brewFlasks"},this.props.upgradeService.getAvailableBrewingTypes(this.props.fluid).map(function(t,a){return s.a.createElement(j,{key:a,duration:e.props.upgradeService.getBrewingTimeBonus(t.name),flask:t,fluid:e.props.fluid,onClick:function(){return e.props.onBrewFlask(t.name)}})})),t.length>0?s.a.createElement("div",{className:"autoBrewingSettings"},s.a.createElement("div",null,"auto brewing:"),t.map(function(t,i){return s.a.createElement("div",{key:i},s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",checked:a===t?"checked":"",onChange:function(){return e.props.setAutoBrewingFlask(t)}})," ",t))})):"")}}]),t}(s.a.Component),I=(a(93),a(20));a(94);function A(e){return s.a.createElement("div",{className:"map isMaze cols-"+e.cols},e.cell.map(function(t,a){return s.a.createElement(V,{key:a,i:a,cell:t,isDungeon:!0,enemy:e.enemies[a]})}))}function q(e){return s.a.createElement("div",null,s.a.createElement("div",{className:"btnRow"},s.a.createElement("div",{className:"title"},"Map ",e.mapLevel+1),s.a.createElement("div",{className:"closeBtn",onClick:function(){return e.closeMap()}},s.a.createElement(y.a,{icon:"times"}))),s.a.createElement("div",{className:"map isMap cols-"+e.cols},e.cell.map(function(t,a){return s.a.createElement(V,{key:a,i:a,cell:t,isDungeon:!1,enemy:e.enemies[a]})})))}function V(e){var t=e.enemy,a="cell"+(t?" "+t.type:"")+e.cell.wallsToString()+(e.cell.deadEnd?" deadEnd":"")+(e.cell.active?" active":"")+(e.cell.visible?"":" hidden")+(e.cell.visited?" visited":"")+(e.cell.looted?" looted":"");return t&&Object.entries(t).length>0?s.a.createElement("div",{className:a},"boss"===t.type||"smallBoss"===t.type?s.a.createElement(y.a,{icon:"skull"}):""!==t.hasLoot?s.a.createElement("div",{className:t.fluidLootType.length>0?t.fluidLootType[0].replace(/ /g,"-"):t.flaskLootType.length>0?t.flaskLootType[0].replace(/ /g,"-"):"e"},s.a.createElement(y.a,{icon:t.hasLoot})):s.a.createElement(y.a,{icon:"skull"})):s.a.createElement("div",{className:a})}var P=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).call(this,e))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",function(t){return e.handleKeyDown(t)})}},{key:"handleKeyDown",value:function(e){87===e.keyCode?this.props.combatService.move(0,-1,0):68===e.keyCode?this.props.combatService.move(1,0,1):83===e.keyCode?this.props.combatService.move(0,1,2):65===e.keyCode&&this.props.combatService.move(-1,0,3)}},{key:"startMap",value:function(){this.props.combatService.startMap()}},{key:"closeMap",value:function(){this.props.combatService.closeMap()}},{key:"render",value:function(){var e,t=this,a=this.props.combatService.getMenuType();1===a?e=this.props.combatService.getMap():2===a&&(e=this.props.combatService.getDungeon());var i,n=this.props.combatService.getCombat(),r=n.isThrottled?" playerNeedHeal":"",o=10,l=this.props.flask["healing flask"]?this.props.flask["healing flask"]:0;return e&&(e.getEnemies(),i=this.props.combatService.getEnemy(),e.getCells(),o=e.getCols()),s.a.createElement("div",{className:"combat"+r},s.a.createElement("div",{className:"usableFlasks"},l>0&&e?s.a.createElement("div",{className:"btn flask healing-flask",onClick:function(){return t.props.useFlask("healing flask",1)}},s.a.createElement(y.a,{icon:"flask"})," +1 health"):""),s.a.createElement("div",{className:"details"},s.a.createElement("div",{className:"player"},s.a.createElement("div",{className:"progLabel"},"You"),s.a.createElement("div",{className:"prog"},s.a.createElement("div",{className:"label"},C(n.health),"/",C(n.maxHealth)),s.a.createElement("div",{className:"bar",style:{width:100*n.health/n.maxHealth+"%"}}))),i&&Object.entries(i).length>0?s.a.createElement("div",{className:"enemy"},s.a.createElement("div",{className:"progLabel"},"Enemy"),s.a.createElement("div",{className:"prog"},s.a.createElement("div",{className:"label"},C(i.health),"/",C(i.maxHealth)),s.a.createElement("div",{className:"bar",style:{width:100*i.health/i.maxHealth+"%"}}))):""),0===a?s.a.createElement("div",null,s.a.createElement("div",{className:"createDungeon"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"title"},"create Dungeon"),s.a.createElement("div",{className:"btn"},"create")),s.a.createElement("div",{className:"row"},s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement("input",{type:"range",defaultValue:"0",min:"0",max:"100"}),s.a.createElement("div",null,"difficult"))),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement("input",{type:"range",defaultValue:"0",min:"0",max:"100"}),s.a.createElement("div",null,"loot"))),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement("input",{type:"range",defaultValue:"0",min:"0",max:"100"}),s.a.createElement("div",null,"size"))))),s.a.createElement("div",{className:"combatmenu"},s.a.createElement("div",{className:"col col-3"},s.a.createElement("div",{className:"item"},s.a.createElement(y.a,{icon:"key"})," 0")),s.a.createElement("div",{className:"col"},s.a.createElement("div",{className:"btn",onClick:function(){return t.startMap()}},s.a.createElement("div",{className:"icon"},s.a.createElement(y.a,{icon:"home"})),s.a.createElement("div",{className:"text"},s.a.createElement("div",null,"Map Level ",n.curMap.mapLevel))),s.a.createElement("div",{className:"btn"},s.a.createElement("div",{className:"icon"},s.a.createElement(y.a,{icon:I.a})),s.a.createElement("div",{className:"text"},s.a.createElement("div",null,"dungeon level 10"),s.a.createElement("div",null,"100% ",s.a.createElement(y.a,{icon:I.c}),"100% ",s.a.createElement(y.a,{icon:"box-open"}),"25 ",s.a.createElement(y.a,{icon:"th"}))))))):1===a?s.a.createElement(q,{menuType:a,mapLevel:e.mapLevel,enemies:e.getEnemies(),cell:e.getCells(),closeMap:function(){return t.closeMap()},cols:o}):2===a?s.a.createElement(A,{menuType:a,mapLevel:e.mapLevel,enemies:e.getEnemies(),cell:e.getCells(),cols:o}):"")}}]),t}(s.a.Component),U=(a(96),a(22)),Q=a.n(U);function H(e){var t="";return e.upgr.fluidCostType.forEach(function(a,i){t+=e.upgr.fluidCost[i]+" "+a+", "}),t=t.replace(/,\s*$/,""),e.upgr.fluidThere(e.fluid,e.flask)?s.a.createElement("div",{className:"upgrade "+(e.upgr.buyable(e.fluid,e.flask)?"buyable":""),onClick:function(){return e.onClick(e.upgr.id)}},s.a.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:e.upgr.text}}),s.a.createElement("div",{className:"costs"},t),s.a.createElement("div",{className:"costs"},e.upgr.flaskCostType.map(function(t,a){return s.a.createElement("span",{key:a},e.upgr.flaskCost[a]," ",s.a.createElement("span",{className:"flask "+t.replace(/ /g,"-")},s.a.createElement(y.a,{icon:"flask"})))}))):""}var G=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[];for(var a in this.props.data.fluid)this.props.data.fluid.hasOwnProperty(a)&&t.push(a);var i="";return 0===this.props.selectedMenuBar?i=s.a.createElement("div",{className:"upgrades"},s.a.createElement("div",{className:"title"}),this.props.upgradeService.getAllUnbought().map(function(t,a){return s.a.createElement(H,{onClick:function(){return e.props.onBuyUpgrade(t.id)},upgr:t,key:a,fluid:e.props.data.fluid,flask:e.props.data.flask})})):1===this.props.selectedMenuBar?i=s.a.createElement(R,{upgradeService:this.props.upgradeService,brewingService:this.props.brewingService,fluid:this.props.data.fluid,curAutoBrewing:this.props.data.curAutoBrewing,onBrewFlask:function(t){return e.props.onBrewFlask(t)},setAutoBrewingFlask:function(t){return e.props.setAutoBrewingFlask(t)}}):2===this.props.selectedMenuBar&&(i=s.a.createElement("div",{className:"settings"},s.a.createElement("div",{className:"title"},"Settings:"),s.a.createElement("div",{className:"btnRow"},s.a.createElement("div",{className:"export btn",onClick:function(){return e.props.openModal(0)}},"export game"),s.a.createElement("div",{className:"import btn",onClick:function(){return e.props.openModal(1)}},"import game")),s.a.createElement("div",{className:"btnRow mg-top"},s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",value:!this.props.data.shrinkAuto,className:"checkbox",onChange:function(){return e.props.shrinkAutoClicker()}})," Shrink Autoclicker")),s.a.createElement("div",{className:"title"},"Chart:"),s.a.createElement("div",{className:"formGroup"},s.a.createElement("div",{className:"label"},"Delay"),s.a.createElement("div",null,s.a.createElement("input",{type:"number",className:"statisticDelay",onChange:function(t){return e.props.handleStatistic(t)},min:"2",max:"180",defaultValue:this.props.statisticDelay})),s.a.createElement("div",null,"sec")),s.a.createElement("div",{className:"formGroup"},s.a.createElement("div",{className:"label"},"Points"),s.a.createElement("div",null,s.a.createElement("input",{type:"number",className:"statisticPoints",onChange:function(t){return e.props.handleStatistic(t)},min:"10",step:"10",max:"500",defaultValue:this.props.statisticPoints}))),s.a.createElement("div",{className:"subtitle"},"What to display:"),t.map(function(t,a){return s.a.createElement("div",{key:a,className:"formGroup checkbox"},s.a.createElement("label",{className:"checkbox"},s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",checked:-1!==e.props.selectedFluids.findIndex(function(e){return e===t}),className:"checkbox",value:t,onChange:function(t){return e.props.handleStatistic(t)},defaultValue:e.props.chartDisplay})),s.a.createElement("div",{className:"label"},t)))}))),s.a.createElement("div",{className:"sidebar"},-1===this.props.selectedReactor?s.a.createElement("div",{className:"menu"},s.a.createElement("div",{className:"menubar"},s.a.createElement("div",{className:"item "+(0===this.props.selectedMenuBar?"active":""),onClick:function(){return e.props.onSelectMenuBar(0)}},"Upgrades"),this.props.upgradeService.getAvailableBrewingTypes().length>0?s.a.createElement("div",{className:"item "+(1===this.props.selectedMenuBar?"active":""),onClick:function(){return e.props.onSelectMenuBar(1)}},"Brewing"):"",s.a.createElement("div",{className:"item "+(2===this.props.selectedMenuBar?"active":""),onClick:function(){return e.props.onSelectMenuBar(2)}},"Settings")),i,void 0!==this.props.data.combat?s.a.createElement(P,{flask:this.props.data.flask,combat:this.props.data.combat,combatService:this.props.combatService,useFlask:function(t,a){return e.props.useFlask(t,a)}}):""):void 0!==this.props.data.reactor[this.props.selectedReactor]?s.a.createElement("div",{className:"menu reactorsettings"},s.a.createElement(L,{id:this.props.selectedReactor,reactor:this.props.data.reactor[this.props.selectedReactor],clicks:this.props.data.clicks,deselect:function(){return e.props.deselect()},upgradeService:this.props.upgradeService,fluid:this.props.data.fluid,flask:this.props.data.flask,onBuyReactorUpgrade:function(t,a){return e.props.onBuyReactorUpgrade(t,a)},setReactorType:function(t,a){return e.props.setReactorType(t,a)},shrinkReactor:function(t,a){return e.props.shrinkReactor(t)},toggleInput:function(t,a){return e.props.toggleInput(t,a)}})):"Error")}}]),t}(s.a.Component);a(98);function W(e){var t=e.amount?e.amount:0;return 0!==t?s.a.createElement("div",{className:"fluid "+e.name},s.a.createElement("div",{className:"bar",style:{width:100*t/e.maxAmount+"%"}}),s.a.createElement("div",{className:"label"},b(t),"/",e.maxAmount)):""}function J(e){var t=e.amount?e.amount:0;return 0!==t?s.a.createElement("div",{className:"flask "+e.name.replace(/ /g,"-")},t," ",s.a.createElement(y.a,{icon:"flask"})):""}var K=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"scrollToBottom",value:function(){window.innerHeight>800&&this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"sidebarleft"},s.a.createElement("div",{className:"storedFluid"},Object.keys(this.props.data.fluid).map(function(t,a){return s.a.createElement(W,{key:t,name:t,amount:e.props.data.fluid[t],maxAmount:e.props.capacityService.getCapacity(t)})})),s.a.createElement("div",{className:"storedFlask"},Object.keys(this.props.data.flask).map(function(t,a){return s.a.createElement(J,{key:t,name:t,amount:e.props.data.flask[t]})})),s.a.createElement("div",{className:"upgrades"},s.a.createElement("div",{className:"title"}),this.props.upgradeService.getAllCapacityUnbought().map(function(t,a){return t.buyableHalf(e.props.data.fluid,e.props.data.flask)?s.a.createElement(H,{onClick:function(){return e.props.onBuyUpgrade(t.id)},upgr:t,key:a,fluid:e.props.data.fluid,flask:e.props.data.flask}):""})),s.a.createElement("div",{className:"logs"},s.a.createElement(m.b,{items:this.props.logs,keys:function(e){return e.key},from:{transform:"translate3d(-40px,0,0)",opacity:0,height:0},enter:{transform:"translate3d(0,0,0)",opacity:1,height:"auto"},leave:{opacity:0}},function(e){return function(t){return s.a.createElement("div",{className:"log",style:t},Q()(e.date).format("h:mm")," ",e.text)}}),s.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})))}}]),t}(s.a.Component),Y={fluid:{},flask:{},clicksReward:{},clicks:{},reactor:[],autoClicker:[],upgrades:[],curAutoBrewing:"",combat:void 0,shrinkAuto:!1,clicker:["frog"],brewingQueue:[],prestiges:[{type:"manualClicks",subType:"frog",level:0},{type:"specialCountDecrease",subType:"frog",level:0}]},$=[{id:0,type:"clickspeed",subType:"frog",text:"Halves the waiting time",fluidCost:[6],fluidCostType:["slime"],flaskCost:[],flaskCostType:[],require:["frog"]},{id:1,type:"capacity",subType:"slime",text:"Increase your slime capacity by 100%",fluidCost:[8],fluidCostType:["slime"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 10*Math.pow(2,e)-4*e-2-Math.floor(10*Math.pow(2,e)*.5*(e/(e+20)))},infinite:!0,level:0,require:["frog"]},{id:2,type:"doubleclicks",subType:"frog",text:"I hate clicking!<br>Doubles the click reward AND the click duration",fluidCost:[15],fluidCostType:["slime"],flaskCost:[],flaskCostType:[],require:["frog"]},{id:3,type:"specialCountDecrease",subType:"frog",text:"fill to kill!<br>kill the frog 20% faster",fluidCost:[38],fluidCostType:["slime"],flaskCost:[],flaskCostType:[],require:["frog"]},{id:4,type:"unlockBrewing",subType:"slimetific flask",text:"Enable the ability to store fluids in flasks",fluidCost:[35],fluidCostType:["slime"],flaskCost:[],flaskCostType:[],require:["frog"]},{id:5,type:"clickspeed",subType:"frog",text:"Halves the waiting time until your next click",fluidCost:[38],fluidCostType:["slime"],flaskCost:[1],flaskCostType:["slimetific flask"],require:["frog"]},{id:6,type:"specialCountDecrease",subType:"frog",text:"fill to kill!<br>kill the frog 20% faster",fluidCost:[2],fluidCostType:["blood"],flaskCost:[],flaskCostType:[],require:["frog"]},{id:7,type:"specialCountDecrease",subType:"frog",text:"kill the frog 20% faster",fluidCost:[3],fluidCostType:["blood"],flaskCost:[1],flaskCostType:["slimetific flask"],require:["frog"]},{id:8,type:"specialCountDecrease",subType:"frog",text:"kill the frog 20% faster",fluidCost:[60],fluidCostType:["slime"],flaskCost:[2],flaskCostType:["slimetific flask"],require:["frog"]},{id:9,type:"reactor",subType:"reactor",text:"buy your first reactor",fluidCost:[3],fluidCostType:["blood"],flaskCost:[3],flaskCostType:["slimetific flask"],require:["frog"]},{id:10,type:"capacity",subType:"blood",text:"Increase your blood capacity by 100%",fluidCost:[5],fluidCostType:["blood"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 5*Math.pow(2,e)},infinite:!0,level:0,require:["frog"]},{id:11,type:"specialCountDecrease",subType:"frog",text:"kill the frog 20% faster",fluidCost:[125],fluidCostType:["slime"],flaskCost:[],flaskCostType:[],require:["frog"]},{id:12,type:"brewingTimeBonus",subType:"slimetific flask",text:"Decrease brewing time by 20% (only new added flasks)",fluidCost:[],fluidCostType:[],flaskCost:[2],flaskCostType:["slimetific flask"],require:["frog"]},{id:13,type:"doubleclicks",subType:"frog",text:"Doubles the slime reward and click duration",fluidCost:[150],fluidCostType:["slime"],flaskCost:[3],flaskCostType:["slimetific flask"],require:["frog"]},{id:16,type:"brewingTimeBonus",subType:"slimetific flask",text:"Decrease brewing time by 20% (only new added flasks)",fluidCost:[],fluidCostType:[],flaskCost:[4],flaskCostType:["slimetific flask"],require:["frog"]},{id:14,type:"autoClicker",subType:"frog",text:"AUTOCLICKER!",fluidCost:[60],fluidCostType:["blood"],flaskCost:[10],flaskCostType:["slimetific flask"],require:["frog"]},{id:15,type:"specialCountDecrease",subType:"frog",text:"kill the frog 20% faster",fluidCost:[200],fluidCostType:["slime"],flaskCost:[15],flaskCostType:["slimetific flask"],require:["frog"]},{id:17,type:"brewingTimeBonus",subType:"slimetific flask",text:"Decrease brewing time by 20% (only new added flasks)",fluidCost:[],fluidCostType:[],flaskCost:[12],flaskCostType:["slimetific flask"],require:["frog"]},{id:19,type:"specialCountDecrease",subType:"frog",text:"kill the frog 20% faster",fluidCost:[400],fluidCostType:["slime"],flaskCost:[25],flaskCostType:["slimetific flask"],require:["frog"]},{id:18,type:"doubleclicks",subType:"frog",text:"Doubles the slime reward",fluidCost:[500],fluidCostType:["blood"],flaskCost:[28],flaskCostType:["slimetific flask"],require:["frog"]},{id:20,type:"autoBrewing",subType:"slimetific flask",text:"automatically generate slimetific flask, if the queue is empty",fluidCost:[600],fluidCostType:["blood"],flaskCost:[30],flaskCostType:["slimetific flask"],require:["frog"]},{id:21,type:"unlockCombat",subType:"unlockCombat",text:"A dark hole",fluidCost:[800],fluidCostType:["blood"],flaskCost:[40],flaskCostType:["slimetific flask"],require:["frog"]},{id:22,type:"unlockBrewing",subType:"healing flask",text:"unlock healing flasks",fluidCost:[1e3],fluidCostType:["blood"],flaskCost:[50],flaskCostType:["slimetific flask"],require:["frog"]},{id:23,type:"flaskRewardBonus",subType:"healing flask",text:"increase the Healing amount by 25%",fluidCost:[1e3],fluidCostType:["blood"],flaskCost:[50],flaskCostType:["slimetific flask"],require:["frog"]},{id:23,type:"clicker",subType:"ghost",text:"something new",fluidCost:[3500],fluidCostType:["blood"],flaskCost:[500],flaskCostType:["slimetific flask"],require:["frog"]},{id:24,type:"capacity",subType:"water",text:"Increase your water capacity by 100%",fluidCost:[3],fluidCostType:["water"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 5*Math.pow(2,e)-Math.floor(5*Math.pow(2,e)*.5*(e/(e+40)))},infinite:!0,level:0,require:["ghost"]},{id:25,type:"doubleclicks",subType:"ghost",text:"double the ghost trouble",fluidCost:[3],fluidCostType:["water"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:26,type:"clickspeed",subType:"ghost",text:"Decrease the ghost timer by 100%",fluidCost:[1e3],fluidCostType:["blood"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:27,type:"clickspeed",subType:"ghost",text:"Decrease the ghost timer by 100%",fluidCost:[1500],fluidCostType:["blood"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:28,type:"reactor",subType:"reactor",text:"buy a reactor",fluidCost:[4],fluidCostType:["water"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:29,type:"unlockReactor",subType:"water extractor",text:"Having the same reactor twice?<br>unlock new reactor type",fluidCost:[6],fluidCostType:["water"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:30,type:"clickspeed",subType:"ghost",text:"Decrease ghost clicking by 100%",fluidCost:[2e3,30],fluidCostType:["blood","water"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:31,type:"clickspeed",subType:"ghost",text:"Decrease ghost clicking by 100%",fluidCost:[4e3,50],fluidCostType:["blood","water"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:32,type:"clickspeed",subType:"ghost",text:"Decrease ghost clicking by 100%",fluidCost:[.5],fluidCostType:["oxygen"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:33,type:"reactor",subType:"reactor",text:"buy a reactor",fluidCost:[1],fluidCostType:["ink"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:34,type:"autoClicker",subType:"ghost",text:"ghost AUTOCLICKER!<br>3 should be a reachable number, isn't it?",fluidCost:[3],fluidCostType:["oxygen"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:35,type:"doubleclicks",subType:"ghost",text:"double the ghost trouble",fluidCost:[80],fluidCostType:["water"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:36,type:"capacity",subType:"oxygen",text:"Increase your oxygen capacity by 100%",fluidCost:[5],fluidCostType:["oxygen"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 5*Math.pow(2,e)-Math.floor(5*Math.pow(2,e)*.5*(e/(e+40)))},infinite:!0,level:0,require:["ghost"]},{id:37,type:"doubleclicks",subType:"ghost",text:"double the ghost trouble",fluidCost:[15],fluidCostType:["oxygen"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:38,type:"doubleclicks",subType:"ghost",text:"double the ghost trouble",fluidCost:[5],fluidCostType:["ink"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:39,type:"doubleclicks",subType:"ghost",text:"double the ghost trouble",fluidCost:[1200,8],fluidCostType:["water","ink"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:40,type:"doubleclicks",subType:"ghost",text:"double the ghost trouble",fluidCost:[2500,30],fluidCostType:["water","oxygen"],flaskCost:[],flaskCostType:[],require:["ghost"]},{id:41,type:"unlockReactor",subType:"alkali mixture",text:"unlock new reactor type",fluidCost:[3e3,50],fluidCostType:["water","oxygen"],flaskCost:[],flaskCostType:[],require:["ghost"]}],_=new(function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"loadGame",value:function(){var e=this;return new Promise(function(t,a){try{var i=JSON.parse(localStorage.getItem("alchyData"));void 0===i||null===i?(console.log("new game"),t({data:e.newGame(),newGame:!0})):t({data:i,newGame:!1})}catch(s){a({err:s})}})}},{key:"saveGame",value:function(e){localStorage.setItem("alchyData",JSON.stringify(e))}},{key:"newGame",value:function(){var e=Y;return $.forEach(function(t,a){t.infinite&&e.upgrades.push(t)}),e}}]),e}()),z=[{key:"frog",rewardName:"slime",rewardAmount:1,specialName:"blood",specialAmount:1,specialCount:30},{key:"ghost",rewardName:"water",rewardAmount:1,specialName:"ink",specialAmount:1,specialCount:100}],X=[{name:"frog",duration:1e3},{name:"ghost",duration:1e4}],Z=function(){function e(t,a){Object(l.a)(this,e),this.upgrades=t,this.prestiges=a}return Object(u.a)(e,[{key:"update",value:function(e,t){this.upgrades=e,this.prestiges=t}},{key:"rewardFor",value:function(e,t){var a=z.find(function(t){return t.key===e});return void 0!==a?a:z[0]}},{key:"specialCount",value:function(e){var t=0;this.upgrades.forEach(function(a,i){"specialCountDecrease"===a.type&&a.subType===e&&t++});var a=0;this.prestiges.forEach(function(t,i){"specialCountDecrease"===t.type&&t.subType===e&&(a=+t.level)});var i=z.find(function(t){return t.key===e});return void 0!==i?Math.round(i.specialCount*Math.pow(.8,t)*Math.pow(.95,a)):100}},{key:"clickDelay",value:function(e){var t=0,a=0;this.upgrades.forEach(function(i,s){"clickspeed"===i.type&&i.subType===e?t++:"doubleclicks"===i.type&&i.subType===e&&a++});var i=X.find(function(t){return t.name===e}).duration;return void 0===i&&(i=1e3),i*Math.pow(2,a)/Math.pow(2,t)}}]),e}(),ee=[{name:"slime",startValue:10,bonus:function(e){return Math.pow(2,e)}},{name:"blood",startValue:10,bonus:function(e){return Math.pow(2,e)}},{name:"water",startValue:5,bonus:function(e){return Math.pow(2,e)}},{name:"oxygen",startValue:10,bonus:function(e){return Math.pow(2,e)}},{name:"ink",startValue:10,bonus:function(e){return Math.pow(2,e)}},{name:"alkali",startValue:10,bonus:function(e){return Math.pow(2,e)}},{name:"poison",startValue:100,bonus:function(e){return Math.pow(2,e)}}],te=function(){function e(t){Object(l.a)(this,e),this.upgrades=t}return Object(u.a)(e,[{key:"update",value:function(e){this.upgrades=e}},{key:"getCapacity",value:function(e){var t=ee.find(function(t){return t.name===e}),a=0;return this.upgrades.forEach(function(t,i){"capacity"===t.type&&t.subType===e&&(t.infinite?a+=t.level:a++)}),void 0!==t?t.startValue*t.bonus(a):100}}]),e}(),ae=[{name:"slime",input:[.5/1.2,.1/1.2],inputFluid:["slime","blood"],reagentRatio:[.8,.2],output:.5,outputFluid:"blood",power:1,capacity:10,outputCapacity:8,inputFlow:[.21,.042],inputFlowPerc:.01,outputFlow:.25,upgrades:[{id:0,type:"capacity",subType:"capacity",text:"Increase your capacity by 100%",fluidCost:[100],fluidCostType:["slime"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 25*Math.pow(2,e)+75},infinite:!0,level:0},{id:1,type:"inputFlow",subType:"inputFlow",text:"Increase your input by 100%",fluidCost:[18],fluidCostType:["blood"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 18*Math.pow(2,e)},infinite:!0,level:0},{id:2,type:"power",subType:"power",text:"Increase your Power by 100%",fluidCost:[40],fluidCostType:["blood"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 40*Math.pow(2,e)},infinite:!0,level:0},{id:3,type:"outputFlow",subType:"outputFlow",text:"Increase your output by 100%",fluidCost:[32],fluidCostType:["blood"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 32*Math.pow(2,e)},infinite:!0,level:0}]},{name:"water extractor",input:[10],inputFluid:["water"],reagentRatio:[1],output:.1,outputFluid:"oxygen",power:1,capacity:10,outputCapacity:.5,inputFlow:[.15626],inputFlowPerc:.01,outputFlow:.0015626,upgrades:[{id:0,type:"capacity",subType:"capacity",text:"Increase your capacity by 100%",fluidCost:[60],fluidCostType:["water"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 60*Math.pow(2,e)},infinite:!0,level:0},{id:1,type:"inputFlow",subType:"inputFlow",text:"Increase your input by 100%",fluidCost:[.125],fluidCostType:["oxygen"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return.125*Math.pow(2,e)},infinite:!0,level:0},{id:2,type:"power",subType:"power",text:"Increase your Power by 100%",fluidCost:[9.625],fluidCostType:["oxygen"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 9.625*Math.pow(2,e)},infinite:!0,level:0},{id:3,type:"outputFlow",subType:"outputFlow",text:"Increase your output by 100%",fluidCost:[.1875],fluidCostType:["oxygen"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return.1875*Math.pow(2,e)},infinite:!0,level:0}]},{name:"alkali mixture",input:[.75,.095/1.2,.005/1.2],inputFluid:["blood","oxygen","ink"],reagentRatio:[.9,.095,.005],output:.1,outputFluid:"alkali",power:1,capacity:10,outputCapacity:5,inputFlow:[.09,.095,5e-4],inputFlowPerc:.01,outputFlow:.1,upgrades:[{id:0,type:"capacity",subType:"capacity",text:"Increase your capacity by 100%",fluidCost:[60],fluidCostType:["water"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 60*Math.pow(2,e)},infinite:!0,level:0},{id:1,type:"inputFlow",subType:"inputFlow",text:"Increase your input by 100%",fluidCost:[.125],fluidCostType:["oxygen"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return.125*Math.pow(2,e)},infinite:!0,level:0},{id:2,type:"power",subType:"power",text:"Increase your Power by 100%",fluidCost:[6],fluidCostType:["oxygen"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return 6*Math.pow(2,e)},infinite:!0,level:0},{id:3,type:"outputFlow",subType:"outputFlow",text:"Increase your output by 100%",fluidCost:[.1875],fluidCostType:["oxygen"],flaskCost:[],flaskCostType:[],costIncrease:function(e){return.1875*Math.pow(2,e)},infinite:!0,level:0}]}],ie=[{name:"slimetific flask",desr:"perfekt for the slimetific",require:[{name:"slime",value:5}],duration:3e4,bonusTime:function(e){return Math.pow(.8,e)}},{name:"healing flask",desr:"restore health",require:[{name:"blood",value:100}],duration:6e4,bonusTime:function(e){return Math.pow(.9,e)}}],se=function(){function e(t,a,i){var s=this;Object(l.a)(this,e),this.brewingQueue=t,this.timer=setTimeout(function(){return s.checkQueue()},3e3),this.getFlaskFunc=a,this.emptyBrewingQueue=i}return Object(u.a)(e,[{key:"getQueue",value:function(){return this.brewingQueue}},{key:"addToQueue",value:function(e,t,a){var i=this;this.brewingQueue.push({name:e.name,duration:t,value:1}),1===this.brewingQueue.length&&(this.brewingQueue[0].startDate=new Date),void 0===this.timer&&(this.timer=setTimeout(function(){return i.checkQueue()},t))}},{key:"removeQueueItem",value:function(e){0!==e&&this.brewingQueue.splice(e,1)}},{key:"checkQueue",value:function(){var e=this;if(0===this.brewingQueue.length||void 0===this.brewingQueue[0])return clearTimeout(this.timer),this.timer=void 0,void this.emptyBrewingQueue();var t=this.brewingQueue[0];if(void 0===t.startDate){t.startDate=new Date;var a=t.duration;this.timer=setTimeout(function(){return e.checkQueue()},a)}else if((new Date).getTime()-new Date(t.startDate)+100>t.duration){this.brewingQueue.shift();var i=0;this.brewingQueue.length>0&&(this.brewingQueue[0].startDate=new Date,i=this.brewingQueue[0].duration),this.getFlaskFunc(t),this.timer=setTimeout(function(){return e.checkQueue()},i)}else{var s=t.duration-((new Date).getTime()-new Date(t.startDate));this.timer=setTimeout(function(){return e.checkQueue()},s)}}}]),e}(),ne=function(){function e(t){Object(l.a)(this,e),this.name=t.name,this.desr=t.desr,this.require=t.require,this.duration=t.duration}return Object(u.a)(e,[{key:"buyable",value:function(e){return void 0!==e&&this.require.every(function(t,a){return!(void 0===e[t.name]||e[t.name]<t.value)})}}]),e}(),re=se,oe=function(){function e(t,a,i){Object(l.a)(this,e),this.upgrades=t,this.prestiges=a,this.clicker=i}return Object(u.a)(e,[{key:"update",value:function(e,t,a){this.upgrades=e,this.prestiges=t,this.clicker=a}},{key:"getAllUnbought",value:function(){var e=this,t=[],a=0;return $.every(function(i){var s=e.upgrades.find(function(e){return e.id===i.id});return i.require.every(function(t){return e.clicker.includes(t)})&&(void 0===s?(t.push(new ue(i)),a++):i.infinite),!(a>3)}),t.sort(le),t.slice(0,3)}},{key:"getAllCapacityUnbought",value:function(){var e=this,t=[];return $.map(function(a){if("capacity"===a.type){var i=e.upgrades.find(function(e){return e.id===a.id});e.clicker.some(function(e){return a.require.includes(e)})&&void 0!==i&&t.push(e.getInfUpgr(a,i.level))}}),t}},{key:"hasUprade",value:function(e){return-1!==this.upgrades.findIndex(function(t){return t.id===e})}},{key:"hasAutoClickerUpgrade",value:function(e){return-1!==this.upgrades.findIndex(function(t){return"autoClicker"===t.type&&t.subType===e})}},{key:"getInfUpgr",value:function(e,t){void 0===t&&(t=0);var a=Object.assign({},e);if(a.infinite){var i=a.fluidCost.slice();i.map(function(e,s){void 0!==a.costIncrease?i[s]=a.costIncrease(t):i[s]=i[s]*Math.pow(2,t)}),a.fluidCost=i,a.level=t+1}return new ue(a)}},{key:"getUpgrade",value:function(e){var t=$.find(function(t){return t.id===e});if(void 0!==t){if(t.infinite){var a=this.upgrades.find(function(t){return t.id===e});return new this.getInfUpgr(t,a.level)}return new ue(t)}}},{key:"lvlUp",value:function(e){var t=this.upgrades.find(function(t){return t.id===e});void 0!==t&&t.level++}},{key:"getAvailableReactorTypes",value:function(){var e=[];return e.push(ae[0]),this.upgrades.forEach(function(t,a){if("unlockReactor"===t.type){var i=ae.find(function(e){return e.name===t.subType});void 0!==i&&e.push(i)}}),e}},{key:"getReactorTypeFluid",value:function(e){var t={input:"slime",reagent:"blood",output:"blood"},a=ae.find(function(t){return t.name===e});return a&&(t={input:a.inputFluid,reagent:a.reagentFluid,output:a.outputFluid}),t}},{key:"getAvailableBrewingTypes",value:function(){var e=[];return this.upgrades.forEach(function(t,a){if("unlockBrewing"===t.type){var i=ie.find(function(e){return e.name===t.subType});void 0!==i&&e.push(new ne(i))}}),e}},{key:"getSingleBrewingType",value:function(e){var t=void 0;return this.upgrades.some(function(a,i){if("unlockBrewing"===a.type&&a.subType===e){var s=ie.find(function(e){return e.name===a.subType});return void 0!==s&&(t=new ne(s),!0)}}),t}},{key:"getAutoBrewing",value:function(){var e=[];return this.upgrades.forEach(function(t,a){"autoBrewing"===t.type&&e.push(t.subType)}),e}},{key:"getBrewingTimeBonus",value:function(e){var t=ie.find(function(t){return t.name===e});if(void 0===t)return 6e4;var a=0;return this.upgrades.forEach(function(t,i){"brewingTimeBonus"===t.type&&t.subType===e&&a++}),t.duration*t.bonusTime(a)}},{key:"getClickPower",value:function(e,t){var a=0;this.upgrades.forEach(function(t,i){"doubleclicks"===t.type&&t.subType===e&&a++});var i=0;return t||this.prestiges.forEach(function(t,a){"manualClicks"===t.type&&t.subType===e&&(i=t.level)}),Math.pow(2,a)*(1+.05*i)}},{key:"checkNewInfiUpgrades",value:function(){var e=this,t=[];return $.forEach(function(a,i){a.infinite&&(-1===e.upgrades.findIndex(function(e){return e.id===a.id})&&t.push(a))}),t}}]),e}();function le(e,t){var a=void 0!==e.flaskCost[0]?e.flaskCost[0]:void 0!==e.fluidCost[0]?e.fluidCost[0]:0,i=void 0!==t.flaskCost[0]?t.flaskCost[0]:void 0!==t.fluidCost[0]?t.fluidCost[0]:0;return a<i?-1:a>i?1:0}var ue=function(){function e(t){Object(l.a)(this,e),this.id=t.id,this.type=t.type,this.subType=t.subType,this.text=t.text,this.fluidCost=t.fluidCost,this.fluidCostType=t.fluidCostType,this.flaskCost=t.flaskCost,this.flaskCostType=t.flaskCostType,this.infinite=t.infinite,this.level=t.level}return Object(u.a)(e,[{key:"buyable",value:function(e,t){var a=this;if(void 0===e||void 0===t)return!1;var i=this.fluidCostType.every(function(t,i){return void 0!==e[t]&&!(e[t]<a.fluidCost[i])});return this.flaskCostType.every(function(e,i){return void 0!==t[e]&&!(t[e]<a.flaskCost[i])})&&i}},{key:"buyableHalf",value:function(e,t){var a=this;if(void 0===e||void 0===t)return!1;var i=this.fluidCostType.every(function(t,i){return void 0!==e[t]&&!(e[t]<.5*a.fluidCost[i])});return this.flaskCostType.every(function(e,i){return void 0!==t[e]&&!(t[e]<.5*a.flaskCost[i])})&&i}},{key:"fluidThere",value:function(e,t){if(void 0===e||void 0===t)return!1;var a=this.fluidCostType.every(function(t,a){return void 0!==e[t]});return this.flaskCostType.every(function(e,a){return void 0!==t[e]})&&a}}]),e}(),ce=oe,pe=[{type:"normal",healthFunc:function(e){return Math.pow(e/100,2)*e/50+5},dmgFunc:function(e){return Math.pow(e/100,2)*e/50+.3},minDmg:80,maxDmg:80,lootChance:function(e){return Math.random()>.75*Math.pow(.95,e)}},{type:"smallBoss",healthFunc:function(e){return 3*(Math.pow(e/100,2)*e/50+5)},dmgFunc:function(e){return 1.1*(Math.pow(e/100,2)*e/50+.3)},minDmg:80,maxDmg:80,lootChance:function(e){return Math.random()>.5*Math.pow(.95,e)}},{type:"boss",healthFunc:function(e){return 5*(Math.pow(e/100,2)*e/50+5)},dmgFunc:function(e){return 1.25*(Math.pow(e/100,2)*e/50+.3)},minDmg:80,maxDmg:80,lootChance:function(e){return!0}}],de=[{map:-1,option:[{flaskLoot:[],flaskLootType:[],fluidLoot:[20],fluidLootType:["slime"]},{flaskLoot:[30],flaskLootType:["slimetific flask"],fluidLoot:[],fluidLootType:[]},{flaskLoot:[10],flaskLootType:["healing flask"],fluidLoot:[],fluidLootType:[]}]},{map:0,option:[{flaskLoot:[],flaskLootType:[],fluidLoot:[20],fluidLootType:["slime"]},{flaskLoot:[30],flaskLootType:["slimetific flask"],fluidLoot:[],fluidLootType:[]},{flaskLoot:[10],flaskLootType:["healing flask"],fluidLoot:[],fluidLootType:[]}]}],fe=function(){function e(t,a,i,s,n){if(Object(l.a)(this,e),this.upgrades=t,this.prestiges=a,this.fightTimer=void 0,this.getLootFunc=s,this.combatChangedFunc=n,this.combat=i,void 0!==this.combat&&this.combat.dungeons){this.combat.curMap=new ye(!1,this.combat.curMap);this.combat.dungeons.map(function(e,t){e=new me(!1,e)})}}return Object(u.a)(e,[{key:"init",value:function(){var e=this;1===this.combat.curMenu&&void 0===this.fightTimer&&(this.fightTimer=setTimeout(function(){return e.startFight()},1e3))}},{key:"update",value:function(e,t){this.upgrades=e,this.prestiges=t}},{key:"getCombat",value:function(){return this.combat}},{key:"flaskRewardBonus",value:function(e){var t=0;return this.upgrades.forEach(function(a,i){"flaskRewardBonus"===a.type&&a.subType===e&&t++}),Math.pow(1.25,t)}},{key:"useHealFlask",value:function(e){this.combat.health+=3*e*this.flaskRewardBonus("healing flask"),this.combat.health>this.combat.maxHealth&&(this.combat.health=this.combat.maxHealth),this.combat.isThrottled&&this.combat.health>.5*this.combat.maxHealth&&(this.combat.isThrottled=!1)}},{key:"startMap",value:function(){var e=this;0===this.combat.curMenu&&(this.combat.curMenu=1,void 0===this.fightTimer&&(this.fightTimer=setTimeout(function(){return e.startFight()},1e3)),this.combatChangedFunc(this.combat))}},{key:"closeMap",value:function(){1===this.combat.curMenu&&(this.combat.curMenu=0,this.combatChangedFunc(this.combat))}},{key:"unlockCombat",value:function(){console.log("unlockCombat"),this.combat={health:10,maxHealth:10,mana:0,maxMana:0,ep:0,maxEp:10,isThrottled:!1,dmg:1,upgrades:[],curMapPos:0,curDungeonPos:0,highestMap:0,myTurn:!0,curMap:new ye(!0,{cols:10,rows:1}),dungeons:[new me(!0,{cols:5,rows:5})],curDungeon:-1,curMenu:0}}},{key:"getMap",value:function(){return this.combat.curMap}},{key:"getDungeon",value:function(){return this.combat.curDungeon}},{key:"getMenuType",value:function(){return this.combat.curMenu}},{key:"getEnemy",value:function(){return 1===this.combat.curMenu?this.combat.curMap.getEnemy(this.combat.curMapPos):2===this.combat.curMenu?this.combat.curDungeon.getEnemy(this.combat.curDungeonPos):void 0}},{key:"getCell",value:function(){return 1===this.combat.curMenu?this.combat.curMap.getCell(this.combat.curMapPos):2===this.combat.curMenu?this.combat.curDungeon.getCell(this.combat.curDungeonPos):void 0}},{key:"move",value:function(e,t,a){var i=this;if(2===this.combat.curMenu){if(void 0!==this.fightTimer)return;var s=this.combat.curDungeon.getCell(this.combat.curDungeonPos);if(void 0===s||!0===s.walls[a])return!1;var n=this.combat.curDungeon.getCellByCoord(s.x+e,s.y+t);if(void 0===n)return!1;s.active=!1,n.active=!0,n.visible=!0,n.visited=!0,this.combat.curDungeon.setAllNeighboursVisible(n.x,n.y,a);var r=this.combat.curDungeon.gridIndex(s.x+e,s.y+t);this.combat.curDungeonPos=r;var o=this.combat.curDungeon.getEnemy(r);void 0!==o&&o.health>0&&(this.fightTimer=setTimeout(function(){return i.startFight()},1e3))}else if(1===this.combat.curMenu){if(this.getEnemy().health<=0)if(void 0===this.combat.curMap.getEnemy(this.combat.curMapPos+1))this.nextMap();else{this.combat.curMap.getCell(this.combat.curMapPos).active=!1,this.combat.curMapPos++;var l=this.combat.curMap.getCell(this.combat.curMapPos);l.active=!0,l.visited=!0}this.combatChangedFunc(this.combat)}}},{key:"nextMap",value:function(){this.combat.curMapPos=0;var e=this.combat.curMap.mapLevel+1;e>this.combat.highestMap&&(this.combat.highestMap=e),this.combat.curMap=new ye(!0,{mapLevel:e,cols:10,rows:10})}},{key:"startFight",value:function(){var e=this,t=this.getEnemy();if(void 0!==t){if(console.log("fight"),!this.combat.isThrottled){if(this.combat.myTurn){var a=this.combat.dmg*T(50,50);t.health-=a,t.health<=0&&(t.health=0,this.getLootFunc&&this.getLootFunc(t),this.getCell().looted=!0,2===this.combat.curMenu&&(clearTimeout(this.fightTimer),this.fightTimer=void 0,this.combat.curDungeon.allDead()&&(console.log("alldeadleave"),this.combat.curMenu=0,this.combat.curDungeon={})))}else t.health>0&&(this.combat.health-=t.makeDmg(),this.combat.health<=1&&(this.combat.isThrottled=!0,this.combat.health=1));this.combat.myTurn=!this.combat.myTurn}t.health>0?this.fightTimer=setTimeout(function(){return e.startFight()},1e3):1===this.combat.curMenu&&(setTimeout(function(){return e.move()},1e3),this.fightTimer=setTimeout(function(){return e.startFight()},2e3)),this.combatChangedFunc(this.combat)}else this.fightTimer=void 0}}]),e}(),he=function(){function e(t,a){var i=this;if(Object(l.a)(this,e),t)this.cols=a&&a.cols?a.cols:10,this.rows=a&&a.rows?a.rows:10,this.mapLevel=a&&a.mapLevel?a.mapLevel:0,this.cellAmount=this.cols*this.rows,this.enemy=[],this.cell=[],this.name="Map";else if(a){this.cols=a.cols,this.rows=a.rows,this.cellAmount=a.cellAmount,this.enemy=[],this.cell=[],this.mapLevel=a.mapLevel,this.name=a.name;a.cell&&a.cell.map(function(e){return i.cell.push(new ve(e))}),a.enemy&&a.enemy.map(function(e){return i.enemy.push(new ge(!1,e))})}}return Object(u.a)(e,[{key:"getEnemies",value:function(){return this.enemy}},{key:"allDead",value:function(){return this.enemy.every(function(e){return!e||!Object.entries(e).length||e.health<=0})}},{key:"getCells",value:function(){return this.cell}},{key:"gridIndex",value:function(e,t){return e<0||t<0||e>this.cols-1||t>this.rows-1?-1:e+t*this.cols}},{key:"getCell",value:function(e){return this.cell[e]}},{key:"getCols",value:function(){return this.cols}},{key:"getCellByCoord",value:function(e,t){if(!(e<0||t<0||e>this.cols-1||t>this.rows-1)){var a=e+t*this.cols;return this.cell[a]}}},{key:"getEnemy",value:function(e){if(this.enemy[e]&&Object.entries(this.enemy[e]).length>0)return this.enemy[e]}}]),e}(),me=function(e){function t(e,a){var i;if(Object(l.a)(this,t),i=Object(c.a)(this,Object(p.a)(t).call(this,e,a)),e){i.name="Dungeon";for(var s=0;s<i.rows;s++)for(var n=0;n<i.cols;n++)i.cell.push(new ve({x:n,y:s}));var r=[],o=i.cell[0];for(o.prepared=!0,o.active=!0,o.visible=!0,o.visited=!0;void 0!==i.checkNeighbours(o)||r.length>0;){var u=i.checkNeighbours(o);u?(u.prepared=!0,i.checkNeighbours(u)?r.push(o):u.deadEnd=!0,i.removeWalls(o,u),o=u):r.length>0&&(o=r.pop())}for(var d=0;d<i.cellAmount;d++)if(0===d)i.enemy[d]=new ge(!1,{});else{var f=Math.random();i.cell[d].deadEnd?i.enemy[d]=new ge(!0,50,i.mapLevel,f>.5?"boss":f>.25?"smallBoss":"normal",!0,!0):i.enemy[d]=f>.7?new ge(!0,d,i.mapLevel,"normal",!0):new ge(!1,{})}}return i}return Object(d.a)(t,e),Object(u.a)(t,[{key:"removeWalls",value:function(e,t){var a=t.x-e.x,i=t.y-e.y;1===a?(e.walls[1]=!1,t.walls[3]=!1):-1===a?(e.walls[3]=!1,t.walls[1]=!1):1===i?(e.walls[2]=!1,t.walls[0]=!1):-1===i&&(e.walls[0]=!1,t.walls[2]=!1)}},{key:"checkNeighbours",value:function(e){var t=[],a=this.cell[this.gridIndex(e.x,e.y+1)],i=this.cell[this.gridIndex(e.x+1,e.y)],s=this.cell[this.gridIndex(e.x,e.y-1)],n=this.cell[this.gridIndex(e.x-1,e.y)];return a&&!a.prepared&&t.push(a),i&&!i.prepared&&t.push(i),s&&!s.prepared&&t.push(s),n&&!n.prepared&&t.push(n),t.length>0?t[Math.floor(Math.random()*t.length)]:void 0}},{key:"setAllNeighboursVisible",value:function(e,t,a){var i=[];if(i.push(this.getCellByCoord(e,t-1)),i.push(this.getCellByCoord(e+1,t)),i.push(this.getCellByCoord(e,t+1)),i.push(this.getCellByCoord(e-1,t)),0===a)for(var s=t;this.getCellByCoord(e,s)&&!this.getCellByCoord(e,s).walls[a];)s--,i.push(this.getCellByCoord(e,s));else if(2===a)for(var n=t;this.getCellByCoord(e,n)&&!this.getCellByCoord(e,n).walls[a];)n++,i.push(this.getCellByCoord(e,n));else if(1===a)for(var r=e;this.getCellByCoord(r,t)&&!this.getCellByCoord(r,t).walls[a];)r++,i.push(this.getCellByCoord(r,t));else if(3===a)for(var o=e;this.getCellByCoord(o,t)&&!this.getCellByCoord(o,t).walls[a];)o--,i.push(this.getCellByCoord(o,t));i.map(function(e){e&&(e.visible=!0)})}}]),t}(he),ye=function(e){function t(e,a){var i;if(Object(l.a)(this,t),i=Object(c.a)(this,Object(p.a)(t).call(this,e,a)),e){i.mapLevel<10&&(i.rows=i.mapLevel+1,i.cellAmount=i.rows*i.cols);for(var s=0;s<i.rows;s++)for(var n=0;n<i.cols;n++)i.cell.push(new ve({x:n,y:s}));for(var r=0;r<i.cellAmount;r++)i.enemy.push(new ge(!0,r,i.mapLevel));i.cell[0].active=!0,i.cell[0].visited=!0}return i}return Object(d.a)(t,e),t}(he),ve=function(){function e(t){Object(l.a)(this,e),this.x=t.x?t.x:0,this.y=t.y?t.y:0,this.walls=t.walls?t.walls:[!0,!0,!0,!0],this.prepared=!!t.prepared&&t.prepared,this.deadEnd=!!t.deadEnd&&t.deadEnd,this.visited=!!t.visited&&t.visited,this.visible=!!t.visible&&t.visible,this.active=!!t.active&&t.active,this.looted=!!t.looted&&t.looted}return Object(u.a)(e,[{key:"wallsToString",value:function(){var e="";return this.walls[0]&&(e+=" hasWallTop"),this.walls[1]&&(e+=" hasWallRight"),this.walls[2]&&(e+=" hasWallBottom"),this.walls[3]&&(e+=" hasWallLeft"),e}}]),e}(),ge=function(){function e(t,a,i,s){var n=this,r=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5]);if(Object(l.a)(this,e),t){this.level=a+100*i,void 0===s&&(s="normal",a%100===99||a%100===49?s="boss":a%100!==29&&a%100!==79&&a%100!==69||(s="smallBoss"));var o=pe.find(function(e){return e.type===s});if(this.enemyType=s,this.type=o.type,this.maxHealth=o.healthFunc(a),this.health=this.maxHealth,this.dmgFunc=o.dmgFunc,this.minDmg=o.minDmg,this.maxDmg=o.maxDmg,this.fluidLoot=[],this.fluidLootType=[],this.flaskLoot=[],this.flaskLootType=[],this.hasLoot="",r||o.lootChance(0)){var u=de.find(function(e){return e.map===i});if(void 0===u&&(u=de.find(function(e){return-1===e.map})),void 0!==u){var c=Math.floor(Math.random()*u.option.length),p=u.option[c];this.fluidLoot=p.fluidLoot,this.fluidLootType=p.fluidLootType,this.flaskLoot=p.flaskLoot,this.flaskLootType=p.flaskLootType,this.flaskLoot.length>0?this.hasLoot="flask":this.fluidLoot.length>0&&(this.hasLoot="tint")}}}else if(a&&void 0!==a&&Object.entries(a).length>0&&void 0!==a.enemyType){this.enemyType=a.enemyType?a.enemyType:"normal";var d=pe.find(function(e){return e.type===n.enemyType});this.level=void 0!==a.level?a.level:0,this.type=void 0!==a.type?a.type:"normal",this.maxHealth=void 0!==a.maxHealth?a.maxHealth:10,this.health=void 0!==a.health?a.health:0,this.minDmg=void 0!==a.minDmg?a.minDmg:10,this.maxDmg=void 0!==a.maxDmg?a.maxDmg:20,this.fluidLoot=void 0!==a.fluidLoot?a.fluidLoot:[],this.fluidLootType=void 0!==a.fluidLootType?a.fluidLootType:[],this.flaskLoot=void 0!==a.flaskLoot?a.flaskLoot:[],this.flaskLootType=void 0!==a.flaskLootType?a.flaskLootType:[],this.hasLoot=void 0!==a.hasLoot?a.hasLoot:"",this.dmgFunc=d.dmgFunc}}return Object(u.a)(e,[{key:"makeDmg",value:function(){return this.dmgFunc(this.level)*T(this.minDmg,this.maxDmg)}}]),e}(),ke=fe,be=function(){function e(t,a){var i=this;Object(l.a)(this,e),this.curType=t.curType||"undefined",this.inputFlow=t.inputFlow||[],this.inputFlowPerc=t.inputFlowPerc||.01,this.outputFlow=t.outputFlow||.5,this.power=t.power||1,this.isRunning=!1,this.lastOutput=0,this.lastInput=[],this.lastReagent=0,this.reagentRatio=t.reagentRatio||[.8,.2],this.shrink=!1,this.stopInput=[],this.inputValue=[],this.inputFlow.map(function(e,t){i.inputValue[t]=0,i.stopInput[t]=!1}),this.outputValue=t.outputValue||0,this.upgrades=t.upgrades||[],this.upgrades.forEach(function(e,t){i.upgrades[t]=new Ce(e,i.curType)}),this.recalc(),this.timer=setInterval(function(){return a(i)},1e3)}return Object(u.a)(e,[{key:"destroy",value:function(){clearInterval(this.timer)}},{key:"capacity",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=ae.find(function(t){return t.name===e.curType});if(void 0!==a){var i=0,s=this.upgrades.find(function(e){return"capacity"===e.type});return void 0!==s&&(i=s.level),"output"===t?a.outputCapacity*Math.pow(2,i):a.capacity*Math.pow(2,i)}}},{key:"toggleShrink",value:function(){this.shrink=!this.shrink}},{key:"toggleInput",value:function(e){void 0!==this.stopInput[e]&&(this.stopInput[e]=!this.stopInput[e])}},{key:"resetValues",value:function(){var e=this;this.inputValue.map(function(t,a){e.inputValue[a]=0}),this.outputValue=0}},{key:"addValues",value:function(e,t){this.lastInput[t]=e,this.inputValue[t]+=e}},{key:"addOutputValue",value:function(e){this.lastOutput=-e,this.outputValue+=e}},{key:"setType",value:function(e){var t=this;this.curType=e;var a=ae.find(function(t){return t.name===e});a?(this.upgrades=a.upgrades.slice(),this.upgrades.forEach(function(a,i){t.upgrades[i]=new Ce(a,e)}),this.inputFlow=a.inputFlow,this.inputFlowPerc=a.inputFlowPerc,this.outputFlow=a.outputFlow,this.reagentRatio=a.reagentRatio,this.stopInput=[],this.inputFlow.map(function(e,a){t.inputValue[a]=0,t.stopInput[a]=!1})):this.upgrades=[],this.resetValues()}},{key:"run",value:function(){var e=this,t=ae.find(function(t){return t.name===e.curType});if(void 0===t)return this.outputValue;var a=this.power,i=[];t.input.map(function(e,t){i.push(a*e)});var s=a*t.output,n=!1;return t.input.map(function(t,a){e.inputValue[a]<i[a]&&(n=!0)}),n||this.outputValue+s>this.capacity("output")?(this.isRunning=!1,this.outputValue):(t.input.map(function(t,a){e.inputValue[a]-=i[a]}),this.outputValue+=s,this.isRunning=!0,this.outputValue)}},{key:"getFluid",value:function(){var e=this,t=ae.find(function(t){return t.name===e.curType});return void 0===t?{inputFluid:["undefined"],outputFluid:"undefined"}:{inputFluid:t.inputFluid,outputFluid:t.outputFluid}}},{key:"getFluidFlow",value:function(){var e=this,t=ae.find(function(t){return t.name===e.curType});if(void 0!==t)return{inputFluid:t.inputFluid,outputFluid:t.outputFluid,input:t.input,reagent:t.reagent,output:t.output,inputFlow:this.inputFlow,inputFlowPerc:this.inputFlowPerc,outputFlow:this.outputFlow}}},{key:"upgrade",value:function(e){var t=this.upgrades.find(function(t){return t.id===e});void 0!==t&&(t.level++,t.getCost(),this.recalc())}},{key:"recalc",value:function(){var e=this,t=ae.find(function(t){return t.name===e.curType});if(void 0!==t){var a=0,i=this.upgrades.find(function(e){return"power"===e.type});void 0!==i&&(a=i.level),this.power=t.power*Math.pow(2,a),a=0;var s=this.upgrades.find(function(e){return"inputFlow"===e.type});void 0!==s&&(a=s.level),this.inputFlow.map(function(i,s){e.inputFlow[s]=t.inputFlow[s]*Math.pow(2,a)}),a=0;var n=this.upgrades.find(function(e){return"outputFlow"===e.type});void 0!==n&&(a=n.level),this.outputFlow=t.outputFlow*Math.pow(2,a)}}}]),e}(),Ce=function(){function e(t,a){var i=this;if(Object(l.a)(this,e),this.id=t.id?t.id:0,this.type=t.type?t.type:"capacity",this.subType=t.subType?t.subType:"capacity",this.text=t.text?t.text:"Increase your capacity by 100%",this.fluidCost=t.fluidCost?t.fluidCost:[10],this.fluidCostType=t.fluidCostType?t.fluidCostType:["slime"],this.flaskCost=t.flaskCost?t.flaskCost:[10],this.flaskCostType=t.flaskCostType?t.flaskCostType:["slimetific flask"],t.costIncrease)this.costIncrease=t.costIncrease;else{var s=ae.find(function(e){return e.name===a});if(void 0!==s){var n=s.upgrades.find(function(e){return e.id===i.id});void 0!==n&&(this.costIncrease=n.costIncrease)}}this.infinite=!t.infinite||t.infinite,this.level=t.level?t.level:0,this.getCost()}return Object(u.a)(e,[{key:"buyable",value:function(e,t){var a=this;if(void 0===e)return!1;var i=this.fluidCostType.every(function(t,i){return void 0!==e[t]&&!(e[t]<a.fluidCost[i])});return this.flaskCostType.every(function(t,i){return void 0!==e[t]&&!(e[t]<a.fluidCost[i])})&&i}},{key:"getCost",value:function(){var e=this,t=this.level;if(this.infinite){var a=this.fluidCost.slice();a.map(function(i,s){void 0!==e.costIncrease?a[s]=e.costIncrease(t):console.log("ERROR UNDEFINED")}),this.fluidCost=a}return this.fluidCost}}]),e}(),we=function(){function e(t,a){var i=this;Object(l.a)(this,e),this.type=t.type||"frog",this.speed=t.speed||1e3,this.lastClick=t.lastClick||new Date,this.timer=setInterval(function(){a(i),i.lastClick=new Date},this.speed)}return Object(u.a)(e,[{key:"destroy",value:function(){clearInterval(this.timer)}}]),e}(),Te=function(){function e(t){Object(l.a)(this,e),this.addLog=t}return Object(u.a)(e,[{key:"eventOccured",value:function(e,t,a){"newGame"===e?this.addLog("Welcome. I am the log."):"existingGame"===e?this.addLog("Welcome back. You missed nothing."):"capacity"===e&&"slime"===t&&1===a?this.addLog("Look at this graph beside me. Isn't it beautiful?"):"capacity"===e&&"slime"===t&&3===a?this.addLog("SPOILER: Soon I will grant you an autoclicker!"):"capacity"===e&&"slime"===t&&4===a?this.addLog("Warning: Don't overfill your brewing queue!"):"capacity"===e&&"blood"===t&&4===a?this.addLog("Making more flasks than necessary may throttle your progress!"):"capacity"===e&&"blood"===t&&5===a?this.addLog("Do you even care about my tips?"):"capacity"===e&&"blood"===t&&6===a?this.addLog("Converting fluids is sometimes not a good idea. You can stop the reactor by pressing stop"):"unlockBrewing"===e&&"slimetific flask"===t?this.addLog("If you brew more than one flask the other are in queue."):"reactor"===e?this.addLog("Reactors can transform fluids into fluids. Awesome!"):"unlockCombat"===e?this.addLog("Use W A S D or the arrow keys to move"):console.log("event nicht geloggt",e,t,a)}}]),e}(),Ee=function(e){function t(e){var a;Object(l.a)(this,t);return(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={texts:[]},a.lastAdded=new Date,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"show",value:function(e,t,a){var i=this;this.lastAdded=new Date;var s={msg:a,x:e-15,y:t};this.setState({texts:[].concat(Object(o.a)(this.state.texts),[s])},function(){setTimeout(function(){(new Date).getTime()-i.lastAdded.getTime()>950&&i.setState({texts:[]})},1e3)})}},{key:"render",value:function(){return s.a.createElement("div",null,this.state.texts.map(function(e,t){return s.a.createElement("div",{key:t,style:{top:e.y+"px",left:e.x},className:"floatingtext visible"},e.msg)}))}}]),t}(s.a.Component),xe=(a(100),function(e){function t(e){var a;Object(l.a)(this,t);return(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={texts:[]},a.counter=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"show",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;a<2e3&&(a=2e3);var i=new Date,s={added:i,msg:e,key:this.counter++};this.setState({texts:[].concat(Object(o.a)(this.state.texts),[s])},function(){setTimeout(function(){var e=t.state.texts.findIndex(function(e){return e.added===i});-1!==e&&t.setState(function(t){return{texts:t.texts.splice(e,1)}})},a)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"toastWrapper"},s.a.createElement(m.b,{items:this.state.texts,keys:function(e){return e.key},from:{transform:"translate3d(0,-40px,0)",opacity:0,height:"auto"},enter:{transform:"translate3d(0,0,0)",opacity:1,height:"auto"},leave:{transform:"translate3d(0,40px,0)",opacity:0}},function(e){return function(t){return s.a.createElement("div",{className:"toast",style:t},e.msg)}}))}}]),t}(s.a.Component));a(102);function Fe(e){return s.a.createElement("div",{className:"modal "},s.a.createElement("div",{className:"modal-background-disable"}),s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{onClick:function(){return e.openModal(-1)},className:"closeBtn"},s.a.createElement(y.a,{icon:"times"})),e.children))}var Ne=a(19);a(104);Ne.b.add(I.b);var Me=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={data:void 0,lastClick:new Date,selectedReactor:-1,logs:[],selectedMenuBar:0,showModal:-1,compressedExport:"",importTextareaValue:"",statisticPoints:100,statisticDelay:3,selectedFluids:["slime","blood"]},_.loadGame().then(function(e){var t=e.data;t.reactor.forEach(function(e,i){t.reactor[i]=new be(e,function(e){return a.runReactor(e)})}),t.autoClicker.forEach(function(e,i){t.autoClicker[i]=new we(e,function(e){return a.autoClickerClick(e)})}),a.upgradeService=new ce(t.upgrades,t.prestiges,t.clicker),a.combatService=new ke(t.upgrades,t.prestiges,t.combat,function(e){return a.getLoot(e)},function(e){return a.combatChanged(e)}),a.clickRewards=new Z(t.upgrades,t.prestiges),a.capacityService=new te(t.upgrades),a.brewingService=new re(t.brewingQueue,function(e){return a.getFlask(e)},function(){return a.emptyBrewingQueue()}),a.myEventListener=new Te(function(e){return a.addLog(e)});var i,s=a.upgradeService.checkNewInfiUpgrades();s.length>0&&(i=t.upgrades).push.apply(i,Object(o.a)(s));if(e.newGame)a.myEventListener.eventOccured("newGame");else{var n=[];for(var r in t.fluid)t.fluid.hasOwnProperty(r)&&n.push(r);a.myEventListener.eventOccured("existingGame"),a.setState({selectedFluids:n}),a.setState({statisticDelay:10})}a.combatService.unlockCombat(),a.setState({data:t},function(){a.combatService.init()})}),a.saveTimer=setInterval(function(){return a.save()},1e4),a.floatingtext=s.a.createRef(),a.toast=s.a.createRef(),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"save",value:function(){var e=this,t=Object.assign({},this.state.data);t.brewingQueue=this.brewingService.getQueue(),t.combat=this.combatService.getCombat(),this.setState({data:t},function(){void 0!==e.state.data&&_.saveGame(e.state.data);var t=JSON.stringify(e.state.data);e.setState({compressedExport:h.a.compressToBase64(t)}),e.addLog("game saved")})}},{key:"addLog",value:function(e){var t=(new Date).getTime()+this.state.logs.length;if(this.setState({logs:[].concat(Object(o.a)(this.state.logs),[{key:t,date:new Date,text:e}])}),this.state.logs.length>40){var a=Object(o.a)(this.state.logs);a.splice(0,2),this.setState({logs:a})}}},{key:"importGame",value:function(){var e=this;try{var t=JSON.parse(h.a.decompressFromBase64(this.state.importTextareaValue.replace(/\s/gm,"")));if(t.fluid&&t.clicks){this.setState({data:t});var a=t;a.reactor.forEach(function(t,i){a.reactor[i]=new be(t,function(t){return e.runReactor(t)})}),this.state.data.reactor.forEach(function(e){e.destroy()}),this.state.data.autoClicker.forEach(function(e,t){e.destroy()}),a.autoClicker.forEach(function(t,i){a.autoClicker[i]=new we(t,function(t){return e.autoClickerClick(t)})}),this.upgradeService=new ce(a.upgrades,a.prestiges,a.clicker),this.combatService=new ke(a.upgrades,a.prestiges,a.combat,function(t){return e.getLoot(t)},function(t){return e.combatChanged(t)}),this.clickRewards=new Z(a.upgrades,a.prestiges),this.capacityService=new te(a.upgrades),this.brewingService=new re(a.brewingQueue,function(t){return e.getFlask(t)},function(){return e.emptyBrewingQueue()}),this.setState({data:a},function(){e.toast.current.show("okay",5e3),e.openModal(-1)})}}catch(i){console.log("ERR",i),this.toast.current.show("ERROR: "+i,5e3)}}},{key:"changeImportTextarea",value:function(e){this.setState({importTextareaValue:e.target.value})}},{key:"runReactor",value:function(e){var t=this;if(void 0!==e&&"undefined"!==e.curType&&void 0!==this&&void 0!==this.state.data){var a=e.getFluidFlow(),i=Object.assign({},this.state.data);e.run(),a.inputFluid.map(function(s,n){var r=[];void 0!==t.state.data.fluid[s]&&(r=t.state.data.fluid[s]*a.inputFlowPerc),r>e.inputFlow[n]&&(r=e.inputFlow[n]),r+e.inputValue[n]>e.capacity()*e.reagentRatio[n]&&(r=e.capacity()*e.reagentRatio[n]-e.inputValue[n]),e.stopInput[n]&&(r=0),e.addValues(r,n),0!==r&&(i.fluid[s]-=r)});var s=e.outputFlow*(1+e.outputValue/e.capacity("output")*1);s>e.outputValue&&(s=e.outputValue),s>this.capacityService.getCapacity(a.outputFluid)-i.fluid[a.outputFluid]&&(s=this.capacityService.getCapacity(a.outputFluid)-i.fluid[a.outputFluid]),i=this.getFluid(i,a.outputFluid,s),e.addOutputValue(-s),this.setState({data:i})}}},{key:"onClickClicker",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(a||!((new Date).getTime()-this.state.lastClick.getTime()<this.clickRewards.clickDelay(e))){var s=this.upgradeService.getClickPower(e,a);if(!a){if(-1!==this.state.data.autoClicker.findIndex(function(t){return t.type===e}))return;this.setState({lastClick:new Date})}var n=this.clickRewards.rewardFor(e);if(void 0!==n){var r=Object.assign({},this.state.data);if((r=this.getClickCounter(r,e,n.rewardAmount)).clicksReward[e]>=this.clickRewards.specialCount(e)&&((r=this.getFluid(r,n.specialName,n.specialAmount)).clicksReward[e]=0,void 0!==i)){var o=[i.pageX,i.pageY],l=o[0],u=o[1];setTimeout(function(){return t.floatingtext.current.show(l,u,"+"+n.specialAmount+" "+n.specialName)},400)}r=this.getFluid(r,n.rewardName,n.rewardAmount*s),void 0!==i&&this.floatingtext.current.show(i.pageX,i.pageY,"+"+n.rewardAmount*s+" "+n.rewardName),this.setState({data:r})}}}},{key:"getFluid",value:function(e,t,a){return void 0===e.fluid[t]?e.fluid[t]=a:e.fluid[t]+=a,e.fluid[t]>this.capacityService.getCapacity(t)&&(e.fluid[t]=this.capacityService.getCapacity(t)),e}},{key:"getClickCounter",value:function(e,t,a){return void 0===e.clicksReward[t]?e.clicksReward[t]=a:e.clicksReward[t]+=a,void 0===e.clicks[t]?e.clicks[t]=a:e.clicks[t]+=a,e}},{key:"onBuyUpgrade",value:function(e){var t=this,a=this.upgradeService.getUpgrade(e);if(void 0!==a&&a.buyable(this.state.data.fluid,this.state.data.flask)){var i=Object.assign({},this.state.data);a.fluidCostType.forEach(function(e,s){i=t.getFluid(i,e,-a.fluidCost[s])}),a.flaskCostType.forEach(function(e,s){i=t.addFlask(i,e,-a.flaskCost[s])}),a.infinite?this.upgradeService.lvlUp(e):i.upgrades.push(a),"reactor"===a.type?i.reactor.push(new be({},function(e){return t.runReactor(e)})):"autoClicker"===a.type?(this.changeSelectedFluids("autoClicker",a.subType),i.autoClicker.push(new we({type:a.subType},function(e){return t.autoClickerClick(e)}))):"clicker"===a.type?(i.clicker.push(a.subType),this.changeSelectedFluids("clicker",a.subType)):"unlockCombat"===a.type&&this.combatService.unlockCombat(),this.myEventListener.eventOccured(a.type,a.subType,a.level),this.capacityService.update(i.upgrades),this.upgradeService.update(i.upgrades,i.prestiges,i.clicker),this.combatService.update(i.upgrades,i.prestiges),this.clickRewards.update(i.upgrades,i.prestiges),this.setState({data:i})}}},{key:"changeSelectedFluids",value:function(e,t){var a=["water","ink","oxygen"];"autoClicker"===e&&"ghost"===t?a=["water","ink","oxygen"]:"clicker"===e&&"ghost"===t&&(a=["water","ink","oxygen"]),this.setState({selectedFluids:a})}},{key:"selectReactor",value:function(e){this.setState({selectedReactor:e})}},{key:"setReactorType",value:function(e,t){if(void 0!==this.state.data.reactor[e]){var a=Object.assign({},this.state.data);a.reactor[e].setType(t),this.setState({data:a})}}},{key:"autoClickerClick",value:function(e){void 0!==e.type&&this.onClickClicker(e.type,!0)}},{key:"toggleInput",value:function(e,t){if(void 0!==this.state.data.reactor[e]){var a=Object.assign({},this.state.data);a.reactor[e].toggleInput(t),this.setState({data:a})}}},{key:"onBuyReactorUpgrade",value:function(e,t){var a=this;if(void 0!==this.state.data.reactor[e]&&void 0!==this.state.data.reactor[e].upgrades[t]){var i=this.state.data.reactor[e].upgrades[t];if(i.buyable(this.state.data.fluid,this.state.data.flask)){var s=Object.assign({},this.state.data);i.fluidCostType.forEach(function(e,t){s=a.getFluid(s,e,-i.fluidCost[t])}),s.reactor[e].upgrade(t),this.setState({data:s})}}}},{key:"onSelectMenuBar",value:function(e){this.setState({selectedMenuBar:e})}},{key:"openModal",value:function(e){this.setState({showModal:e})}},{key:"handleStatistic",value:function(e){if("statisticDelay"===e.target.className)this.setState({statisticDelay:e.target.value});else if("statisticPoints"===e.target.className)this.setState({statisticPoints:e.target.value});else if("checkbox"===e.target.className){var t=-1;if(this.state.selectedFluids.length>0&&(t=this.state.selectedFluids.findIndex(function(t){return t===e.target.value})),-1===t){var a=this.state.selectedFluids.slice();a.push(e.target.value),this.setState({selectedFluids:a})}else{var i=this.state.selectedFluids.slice();i.splice(t,1),this.setState({selectedFluids:i})}}}},{key:"shrinkReactor",value:function(e){if(void 0!==this.state.data.reactor[e]){var t=Object.assign({},this.state.data);t.reactor[e].toggleShrink(),this.setState({data:t})}}},{key:"shrinkAutoClicker",value:function(){var e=Object.assign({},this.state.data);e.shrinkAuto=!e.shrinkAuto,this.setState({data:e})}},{key:"emptyBrewingQueue",value:function(){var e=this.upgradeService.getAutoBrewing();e.length>0&&e.includes(this.state.data.curAutoBrewing)&&this.onBrewFlask(this.state.data.curAutoBrewing)}},{key:"onBrewFlask",value:function(e){var t=this,a=this.upgradeService.getSingleBrewingType(e);if(void 0!==a)if(a.buyable(this.state.data.fluid)){var i=Object.assign({},this.state.data);a.require.map(function(e){i=t.getFluid(i,e.name,-e.value)});var s=this.upgradeService.getBrewingTimeBonus(a.name);this.brewingService.addToQueue(a,s,1),this.setState({data:i})}else this.toast.current.show("not enough liquid",3e3)}},{key:"getFlask",value:function(e){if(void 0!==e.name&&void 0!==e.value){var t=Object.assign({},this.state.data);t=this.addFlask(t,e.name,e.value),this.setState({data:t})}}},{key:"addFlask",value:function(e,t,a){return void 0===e.flask[t]?e.flask[t]=a:e.flask[t]+=a,e}},{key:"setAutoBrewingFlask",value:function(e){var t=this.upgradeService.getAutoBrewing();if(e===this.state.data.curAutoBrewing){var a=Object.assign({},this.state.data);a.curAutoBrewing="",this.setState({data:a})}else if(t.length>0&&t.includes(e)){var i=Object.assign({},this.state.data);i.curAutoBrewing=e,this.setState({data:i})}}},{key:"getLoot",value:function(e){var t=this,a="you loot ",i=Object.assign({},this.state.data);e.fluidLootType.length>0&&e.fluidLootType.map(function(s,n){i=t.getFluid(i,s,e.fluidLoot[n]),a+=e.fluidLoot[n]+" "+s+" "}),e.flaskLootType.length>0&&e.flaskLootType.map(function(s,n){i=t.addFlask(i,s,e.flaskLoot[n]),a+=e.flaskLoot[n]+" "+s+" "}),e.fluidLootType.length>0||e.flaskLootType.length>0?this.addLog(a):this.addLog("Enemy down"),this.setState({data:i})}},{key:"useFlask",value:function(e,t){var a=this.state.data.flask[e];if(void 0!==a&&a>=t){"healing flask"===e&&this.combatService.useHealFlask(t);var i=Object.assign({},this.state.data);i=this.addFlask(i,e,-t),this.setState({data:i})}}},{key:"combatChanged",value:function(e){if(void 0!==e&&void 0!==this.state.data){var t=Object.assign({},this.state.data);t.combat=e,this.setState({data:t})}}},{key:"render",value:function(){var e=this,t="";return 0===this.state.showModal?t=s.a.createElement("div",null,s.a.createElement("div",null,"export string"),s.a.createElement("textarea",{onClick:function(e){return e.target.select()},readOnly:!0,defaultValue:this.state.compressedExport})):1===this.state.showModal&&(t=s.a.createElement("div",null,s.a.createElement("div",null,"import string"),s.a.createElement("textarea",{onChange:function(t){return e.changeImportTextarea(t)}}),s.a.createElement("div",{className:"btn",onClick:function(){return e.importGame()}},"import game"))),s.a.createElement("div",null,void 0!==this.state.data?s.a.createElement("div",{className:"alchy"},s.a.createElement(K,{data:this.state.data,capacityService:this.capacityService,upgradeService:this.upgradeService,onBuyUpgrade:function(t){return e.onBuyUpgrade(t)},logs:this.state.logs}),s.a.createElement(O,{onClickClicker:function(t,a,i){return e.onClickClicker(t,a,i)},data:this.state.data,lastClick:this.state.lastClick,clickRewards:this.clickRewards,upgradeService:this.upgradeService,selectReactor:function(t){return e.selectReactor(t)},selectedReactor:this.state.selectedReactor,statisticPoints:this.state.statisticPoints,statisticDelay:this.state.statisticDelay,selectedFluids:this.state.selectedFluids}),s.a.createElement(G,{data:this.state.data,combatService:this.combatService,upgradeService:this.upgradeService,brewingService:this.brewingService,onBuyUpgrade:function(t){return e.onBuyUpgrade(t)},deselect:function(){return e.selectReactor(-1)},selectedReactor:this.state.selectedReactor,setReactorType:function(t,a){return e.setReactorType(t,a)},toggleInput:function(t,a){return e.toggleInput(t,a)},onBuyReactorUpgrade:function(t,a){return e.onBuyReactorUpgrade(t,a)},onSelectMenuBar:function(t){return e.onSelectMenuBar(t)},shrinkReactor:function(t){return e.shrinkReactor(t)},shrinkAutoClicker:function(){return e.shrinkAutoClicker()},openModal:function(t){return e.openModal(t)},selectedMenuBar:this.state.selectedMenuBar,statisticPoints:this.state.statisticPoints,statisticDelay:this.state.statisticDelay,handleStatistic:function(t){return e.handleStatistic(t)},selectedFluids:this.state.selectedFluids,onBrewFlask:function(t){return e.onBrewFlask(t)},setAutoBrewingFlask:function(t){return e.setAutoBrewingFlask(t)},useFlask:function(t,a){return e.useFlask(t,a)}}),s.a.createElement(Ee,{ref:this.floatingtext}),s.a.createElement(xe,{ref:this.toast})):s.a.createElement("div",{className:"loading"},"Loading"),-1!==this.state.showModal?s.a.createElement(Fe,{openModal:function(t){return e.openModal(t)}},t):"")}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(Me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},36:function(e,t,a){e.exports=a(106)},41:function(e,t,a){},43:function(e,t,a){},47:function(e,t,a){},91:function(e,t,a){},94:function(e,t,a){},96:function(e,t,a){},98:function(e,t,a){}},[[36,2,1]]]);
//# sourceMappingURL=main.1e51b496.chunk.js.map